<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdmiTrackPro</title>
    <link href="https://fonts.googleapis.com/css2?family=Faster+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Spice&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.13/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
</head>
<body>
    <div id="particles-js"></div>
    <div class="content" style="overflow-y: auto;">
        <header class="site-header">
            <a href="javascript:history.back()" class="back-button">
                <img src="images/atras.png" alt="Regresar" class="back-button-img">
            </a>
            <a href="index.html" class="logo-link">
                <h1 class="logo">AdmiTrackPro</h1>
            </a>
            <div class="spacer"></div>
        </header>
        <div class="container" style="max-width: 400px;">
            <div class="intro">
                <p>Bienvenido a la plataforma móvil de AdmiTrackPro. Aquí puedes gestionar tus tareas de manera eficiente.</p>
                <h2 class="start-title">¡Empieza ya!</h2>
                <div id="particles-title"></div>
                <!-- Sistema de Registro -->
                <div class="form-container">
                    <h2>Registro de Usuario</h2>
                    <form id="registro-form" onsubmit="registrarUsuario(event)">
                        <div class="form-group">
                            <label for="nombre">Nombre:</label>
                            <input type="text" id="nombre" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label for="apellido">Apellido:</label>
                            <input type="text" id="apellido" name="apellido" required>
                        </div>
                        <div class="form-group">
                            <label for="rut">RUT:</label>
                            <input type="text" id="rut" name="rut" required>
                        </div>
                        <div class="form-group">
                            <label for="recinto">Recinto (opcional):</label>
                            <input type="text" id="recinto" name="recinto">
                        </div>
                        <div class="form-group">
                            <label for="correo">Correo Electrónico:</label>
                            <input type="email" id="correo" name="correo" required>
                        </div>
                        <div class="form-group">
                            <label for="telefono">Número Telefónico:</label>
                            <input type="text" id="telefono" name="telefono" required>
                        </div>
                        <button type="submit" class="btn">Registrar</button>
                    </form>
                </div>
                <!-- Sistema de Inicio de Sesión -->
                <div class="form-container">
                    <h2>Inicio de Sesión</h2>
                    <form id="login-form" onsubmit="iniciarSesion(event)">
                        <div class="form-group">
                            <label for="user">Usuario:</label>
                            <input type="text" id="user" name="user" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Contraseña:</label>
                            <input type="password" id="password" name="password" required>
                        </div>
                        <button type="submit" class="btn">Iniciar Sesión</button>
                    </form>
                </div>
                <div class="description">
                    <h2 style="text-align: center;">¿Qué es AdmiTrackPro?</h2>
                    <p style="text-align: center;">AdmiTrackPro es una plataforma web diseñada para la gestión integral de un taller mecánico. Con esta herramienta, puedes registrar, gestionar y controlar todos los aspectos de tu taller, incluyendo vehículos, logística, trabajadores, pagos, agenda y citas, y control de mejoras. Nuestra plataforma está optimizada para dispositivos móviles, ofreciendo una experiencia de usuario cómoda y eficiente.</p>
                </div>
                <div class="description">
                    <h2 style="text-align: center;">Quiénes somos</h2>
                    <p style="text-align: center;">Somos un equipo de profesionales dedicados a proporcionar soluciones tecnológicas para la gestión de talleres mecánicos. Nuestro objetivo es facilitar la administración y mejorar la eficiencia operativa de nuestros clientes.</p>
                </div>
                <div class="description">
                    <h2 style="text-align: center;">Misión</h2>
                    <p style="text-align: center;">Nuestra misión es ofrecer una plataforma integral que permita a los talleres mecánicos gestionar sus operaciones de manera eficiente, mejorando la productividad y la satisfacción del cliente.</p>
                </div>
                <div class="description">
                    <h2 style="text-align: center;">Visión</h2>
                    <p style="text-align: center;">Ser la plataforma líder en gestión de talleres mecánicos, reconocida por su innovación, facilidad de uso y capacidad para transformar la manera en que se administran los talleres.</p>
                </div>
                <div class="description">
                    <h2 style="text-align: center;">Objetivo para el usuario</h2>
                    <p style="text-align: center;">Proporcionar a los usuarios una herramienta poderosa y fácil de usar que les permita gestionar todas las áreas de su taller mecánico, desde la administración de vehículos hasta la gestión de pagos y citas.</p>
                </div>
            </div>
            <div class="footer">
                <p>&copy; 2023 AdmiTrackPro. Todos los derechos reservados.</p>
            </div>
        </div>
    </div>
    <div id="alert" class="alert"></div>
    <script src="index.js"></script>
    <script src="scripts.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const startTitle = document.querySelector('.start-title');
            startTitle.style.animation = 'bounceTitle 1.5s infinite alternate'; // Aplicar una animación diferente

            // Redirigir a index.html si no se ha iniciado sesión
            if (!localStorage.getItem('usuario')) {
                window.location.href = 'index.html';
            }
        });

        function registrarUsuario(event) {
            event.preventDefault();
            const nombre = document.getElementById('nombre').value.toLowerCase();
            const apellido = document.getElementById('apellido').value;
            const rut = document.getElementById('rut').value;
            const recinto = document.getElementById('recinto').value;
            const correo = document.getElementById('correo').value;
            const telefono = document.getElementById('telefono').value;

            if (rut.length > 9) {
                mostrarAlerta('El RUT debe contener un máximo de 9 dígitos.', 'error', 5000);
                return;
            }

            const user = nombre + rut.slice(0, 4);
            const password = rut.slice(0, 4);

            const usuario = {
                nombre,
                apellido,
                rut,
                recinto,
                correo,
                telefono,
                user,
                password,
                rol: 'Básico'
            };

            localStorage.setItem('usuario', JSON.stringify(usuario));
            mostrarAlerta('Registrado con éxito', 'success', 5000);
        }

        function iniciarSesion(event) {
            event.preventDefault();
            const user = document.getElementById('user').value;
            const password = document.getElementById('password').value;

            const usuario = JSON.parse(localStorage.getItem('usuario'));

            if (usuario && usuario.user === user && usuario.password === password) {
                mostrarAlerta('Bienvenido ' + usuario.nombre, 'success', 3000, function() {
                    window.location.href = 'inicio.html';
                });
            } else {
                mostrarAlerta('Usuario o contraseña incorrectos.', 'error', 5000);
            }
        }

        function mostrarAlerta(mensaje, tipo, duracion, callback) {
            const alert = document.getElementById('alert');
            alert.textContent = mensaje;
            alert.className = 'alert ' + tipo;
            alert.style.display = 'block';
            setTimeout(function() {
                alert.style.display = 'none';
                if (callback) callback();
            }, duracion);
        }
    </script>
</body>
</html>